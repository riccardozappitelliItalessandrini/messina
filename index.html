<!DOCTYPE html>
<html>
<head>
  <title>Split Screen Base</title>
  <style>
    body { margin: 0; background: black; overflow: hidden; }
    canvas { display: block; margin: auto; }
  </style>
</head>
<body>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 1000;
canvas.height = 600;

const midLine = canvas.width / 2;

let keys = {};

// Inpot handling
window.addEventListener("keydown", e => {
  keys[e.key.toLowerCase()] = true;
});

window.addEventListener("keyup", e => {
  keys[e.key.toLowerCase()] = false;
});

// Players
const player1 = {
  x: midLine / 2,
  y: canvas.height / 2,
  radius: 20,
  speed: 4,
  color: "red"
};

const player2 = {
  x: midLine + midLine / 2,
  y: canvas.height / 2,
  radius: 20,
  speed: 4,
  color: "cyan"
};

function update() {
  // Player 1(destra) wasd
  if (keys["w"]) player1.y -= player1.speed;
  if (keys["s"]) player1.y += player1.speed;
  if (keys["a"]) player1.x -= player1.speed;
  if (keys["d"]) player1.x += player1.speed;

  // Player 2(sinistra) jkli or arrow keys 
  if (keys["i"] || keys["arrowup"]) player2.y -= player2.speed;
  if (keys["k"] || keys["arrowdown"]) player2.y += player2.speed;
  if (keys["j"] || keys["arrowleft"]) player2.x -= player2.speed;
  if (keys["l"] || keys["arrowright"]) player2.x += player2.speed;

  constrainPlayer1();
  constrainPlayer2();
}

function constrainPlayer1() {
  // muro sinistri
    if (player1.x - player1.radius < 0)
        player1.x = player1.radius;

    // sopra
    if (player1.y - player1.radius < 0)
        player1.y = player1.radius;

        //sotto
    if (player1.y + player1.radius > canvas.height)
        player1.y = canvas.height - player1.radius;

    // liea
    if (player1.x + player1.radius > midLine)
        player1.x = midLine - player1.radius;
}

function constrainPlayer2() {
  // muro destro
  if (player2.x + player2.radius > canvas.width)
    player2.x = canvas.width - player2.radius;

  // soprta
  if (player2.y - player2.radius < 0)
    player2.y = player2.radius;

  // sotto
  if (player2.y + player2.radius > canvas.height)
    player2.y = canvas.height - player2.radius;

  // delimita linea
  if (player2.x - player2.radius < midLine)
    player2.x = midLine + player2.radius;
}

function draw() {
  ctx.fillStyle = "black";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.strokeStyle = "white";
  ctx.lineWidth = 4;
  ctx.beginPath();
  ctx.moveTo(midLine, 0);
  ctx.lineTo(midLine, canvas.height);
  ctx.stroke();

  ctx.fillStyle = player1.color;
  ctx.beginPath();
  ctx.arc(player1.x, player1.y, player1.radius, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = player2.color;
  ctx.beginPath();
  ctx.arc(player2.x, player2.y, player2.radius, 0, Math.PI * 2);
  ctx.fill();
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
